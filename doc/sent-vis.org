#+TITLE:Alternative Visualisations

#+options: ':nil *:t -:t ::t <:t H:3 \n:nil ^:t arch:headline
#+options: author:t broken-links:nil c:nil creator:nil
#+options: d:(not "LOGBOOK") date:t e:t email:nil f:t inline:t num:t
#+options: p:nil pri:nil prop:nil stat:t tags:t tasks:t tex:t
#+options: timestamp:t title:t toc:nil todo:t |:t

#+author: Jason Cairns
#+email: jcai849@aucklanduni.ac.nz
#+language: en
#+select_tags: export
#+exclude_tags: noexport
#+creator: Emacs 26.1 (Org mode 9.2.3)

#+latex_class: article
#+LATEX_CLASS_OPTIONS: [a4paper, 11pt]
#+LATEX_HEADER: \usepackage{natbib}
#+LATEX_HEADER: \usepackage{minted}
#+LATEX_HEADER: \usepackage{mathtools}
#+LATEX_HEADER: \usepackage{amsfonts}
#+latex_header_extra:
#+description:
#+keywords:
#+subtitle:
#+date: \today

#+begin_src R :results output silent :colnames yes :session rsession1 :tangle yes :comments link :exports both
  library(tidyverse)
  library(tidytext)
  library(readxl)

  nzqhs <- read_excel("../data/raw/Schonlau1.xls")

  stop_snow<- filter(stop_words, lexicon == "snowball")

  nzqhs_stopped <- nzqhs %>%
    unnest_tokens(word, `expert clinical summary`) %>%
    anti_join(stop_snow)
#+end_src

* Scatterplot
Have a look at a few different displays (e.g. scatterplot of frequency ~ sentiment score).

#+begin_src R :file sent-scatter.png :res 100 :height 400 :width 600 :results output graphics :colnames yes :session rsession1 :exports both :eval never-export
  freq_score <- nzqhs_stopped %>%
    group_by(word) %>%
    count() %>%
    inner_join(get_sentiments("afinn"))

  freq_score %>%
    ggplot(aes(score, n, label=word)) +
    geom_jitter() +
    geom_text(aes(label=word))
#+end_src

#+RESULTS:
[[file:chart.png]]


* Frequency

Sentiment frequencies of positive and negative words, coloured continuously by their sentiment score. (include even for diagnostic purposes)

#+begin_src R :file sent-freq.png :res 100 :height 400 :width 600 :results output graphics :colnames yes :session rsession1 :exports both :eval never-export
  freq_score <- nzqhs_stopped %>%
    group_by(word) %>%
    count() %>%
    inner_join(get_sentiments("afinn"))

  freq_score %>%
    filter(n > 4) %>%
    arrange(n) %>%
    ggplot(aes(word, n, fill=score)) +
    geom_col()
#+end_src

#+RESULTS:
[[file:sent-freq.png]]
